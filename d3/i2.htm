<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8'>
    <title>D3's Hello World</title>
    <script src='/js/d3.v6.min.js'></script>
    <link rel='stylesheet' href='/css/null.css' />
    <style>
        .axis path,
        .axis line {
            fill: none;
            stroke: #333;
        }
        
        .axis .grid-line {
            stroke: #000;
            stroke-opacity: 0.2;
        }
        
        .axis text {
            font: 10px Verdana;
        }
        
        .bar {
            /*stroke: none;*/
        }
    </style>
</head>

<body style='background-color: #01040a'>
    <script>
        const win = window;

        let width = win.innerWidth - 0;
        let height = win.innerHeight - 7;

        //https://mdigi.tools/color-shades/#061639
        let colors = [
            '#f5f8fe',
            '#e2eafc',
            '#cfdcfa',
            '#bccff8',
            '#a8c1f6',
            '#95b3f4',
            '#82a5f2',
            '#6f97f0',
            '#5c89ee',
            '#487cec',
            '#356eea',
            '#2260e8',
            '#1755dd',
            '#154eca',
            '#1346b7',
            '#113fa3',
            '#0f3890',
            '#0d307d',
            '#0b296a',
            '#092157',
            '#071a43',
            '#051330',
            '#030b1d',
            '#01040a'
        ];

        let margin = 0,
            padding = 0,
            data = [{
                x: 1,
                y: 55
            }, {
                x: 2,
                y: 67
            }, {
                x: 3,
                y: 74
            }, {
                x: 4,
                y: 63
            }, {
                x: 5,
                y: 56
            }, {
                x: 6,
                y: 24
            }, {
                x: 7,
                y: 26
            }, {
                x: 8,
                y: 19
            }, {
                x: 9,
                y: 42
            }, {
                x: 10,
                y: 88
            }, {
                x: 11,
                y: 80
            }, {
                x: 12,
                y: 77
            }];

        let svg = d3.select("body").append("svg")
            .attr("class", "axis")
            .attr("width", width)
            .attr("height", height);

        // длина оси X= ширина контейнера svg - отступ слева и справа
        let xAxisLength = width - 2 * margin;

        // длина оси Y = высота контейнера svg - отступ сверху и снизу
        let yAxisLength = height - 2 * margin;

        // функция интерполяции значений на ось Х  
        let scaleX = d3.scaleLinear()
            .domain([1, 13])
            .range([0, xAxisLength]);

        // функция интерполяции значений на ось Y
        let scaleY = d3.scaleLinear()
            .domain([100, 0])
            .range([0, yAxisLength]);

        // создаем ось X   
        let xAxis = d3.axisBottom()
            .scale(scaleX);
        // создаем ось Y             
        let yAxis = d3.axisLeft()
            .scale(scaleY);

        // отрисовка оси Х
        /*             
        svg.append("g")
            .attr("class", "x-axis")
            .attr("transform", // сдвиг оси вниз и вправо
                "translate(" + margin + "," + (height - margin) + ")")
            .call(xAxis);
        */

        // отрисовка оси Y
        /*
        svg.append("g")
            .attr("class", "y-axis")
            .attr("transform", // сдвиг оси вниз и вправо на margin
                "translate(" + margin + "," + margin + ")")
            .call(yAxis);
        */

        /*
        // рисуем горизонтальные линии 
        d3.selectAll("g.y-axis g.tick")
            .append("line")
            .classed("grid-line", true)
            .attr("x1", 0)
            .attr("y1", 0)
            .attr("x2", xAxisLength)
            .attr("y2", 0);
        */
        // создаем объект g для прямоугольников
        let g = svg.append("g")
            .attr("class", "body")
            .attr("transform", // сдвиг объекта вправо
                "translate(" + margin + ", 0 )");
        // связываем данные с прямоугольниками

        let colorindex = 16;

        g.selectAll("rect.bar")
            .data(data)
            .enter()
            .append("rect")
            .attr("class", "bar")
            .attr("fill", colors[colorindex])
            .attr("stroke", colors[colorindex]);
        // устанавливаем параметры прямоугольников
        g.selectAll("rect.bar")
            .data(data)
            .attr("x", function(d) {
                return scaleX(d.x);
            })
            .attr("y", function(d) {
                return scaleY(d.y) + margin;
            })
            .attr("height", function(d) {
                return yAxisLength - scaleY(d.y);
            })
            .attr("width", function(d) {

                return Math.floor(xAxisLength / data.length) - padding;
            });
    </script>
</body>

</html>